<analysis>**original_problem_statement:**
The user wants to build a premium, modern, dark-themed e-commerce website for digital goods, similar to ottsathi.com and gameshopnepal.com. The project has undergone multiple rapid iterations where the entire codebase was replaced with new user-provided GitHub repositories, requiring data preservation and re-implementation of features.

PRODUCT REQUIREMENTS:
- **Homepage:** Display customer reviews and a grid of products.
- **Product System:** Products with variations (e.g., different plans/prices). Admins should be able to edit and reorder these variations.
- **Checkout & Invoicing:** A detailed, multi-step flow is required:
    - On I have Paid, redirect the user to WhatsApp with a pre-filled, dynamically generated message containing the complete order summary.
    - Allow customers to upload a payment screenshot, which automatically updates the order status to Confirmed.
    - Admins must be able to view this screenshot in the order details.
    - Generate a unique, public invoice URL for each completed order.
    - Automatically email the invoice to the customer upon order completion.
- **Admin Panel:** A comprehensive, mobile-responsive admin panel to manage products, categories, reviews, blogs, FAQs, and orders.
- **Authentication:** Secure admin login (credentials moved to environment variables) and an OTP-based customer login system using Gmail for sending codes.
- **Integrations:** Trustpilot for reviews and Take.app for order syncing.

**User's preferred language**: English

**what currently exists?**
The entire codebase was just replaced with a new repository from . All previous user data (products, categories, etc.) was backed up and restored into the MongoDB database. However, after the new code was deployed, the frontend started showing a blank black screen due to a critical JavaScript error. The agent has identified the error and applied a fix but has not yet verified if the application is rendering correctly.

**Last working item**:
-   **Last item agent was working:** Fixing a critical frontend bug in  that caused the application to render a blank black screen. The bug was a typo ( was used instead of  in a hook). The agent applied a code change to correct this.
-   **Status:** IN PROGRESS
-   **Agent Testing Done:** N
-   **Which testing method agent to use?** screenshot tool to take a single screenshot of the homepage () to confirm the black screen issue is resolved.
-   **User Testing Done:** N

**All Pending/In progress Issue list**:
-   **Issue 1: Critical - Application Not Rendering (Priority: P0)**
-   **Issue 2: Verify and Fix Deployment Readiness (Priority: P1)**

**Issues Detail:**
-   **Issue 1: Critical - Application Not Rendering**
    -   **Attempted fixes:** The agent identified a bug in  where  was incorrectly used instead of . A fix has been applied via .
    -   **Next debug checklist:**
        1.  Take a screenshot of the homepage ().
        2.  If it still fails, check the browser console logs (==> /var/log/supervisor/frontend.err.log <==
(node:333) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:333) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:77) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:77) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:400) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:400) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:78) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:78) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:85) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:85) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:389) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:389) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:85) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:85) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:83) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:83) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:85) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:85) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:78) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:78) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:80) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:80) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:84) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:84) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:426) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:426) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:83) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:83) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:80) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:80) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:82) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:404) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:404) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(node:771) [DEP_WEBPACK_DEV_SERVER_ON_AFTER_SETUP_MIDDLEWARE] DeprecationWarning: 'onAfterSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:771) [DEP_WEBPACK_DEV_SERVER_ON_BEFORE_SETUP_MIDDLEWARE] DeprecationWarning: 'onBeforeSetupMiddleware' option is deprecated. Please use the 'setupMiddlewares' option.

==> /var/log/supervisor/frontend.out.log <==
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitMultiple (/app/frontend/node_modules/@babel/traverse/lib/context.js:68:17)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:117:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitMultiple (/app/frontend/node_modules/@babel/traverse/lib/context.js:68:17)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:117:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitMultiple (/app/frontend/node_modules/@babel/traverse/lib/context.js:68:17)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:117:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitSingle (/app/frontend/node_modules/@babel/traverse/lib/context.js:72:19)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:119:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)

ERROR in ./src/components/CustomerAuth.jsx
Module build failed (from ./node_modules/babel-loader/lib/index.js):
TypeError: /app/frontend/src/components/CustomerAuth.jsx: Cannot read properties of null (reading 'traverse')
    at ImportDeclaration (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:876:44)
    at NodePath._call (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:50:20)
    at NodePath.call (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:40:18)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:87:31)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitMultiple (/app/frontend/node_modules/@babel/traverse/lib/context.js:68:17)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:117:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitSingle (/app/frontend/node_modules/@babel/traverse/lib/context.js:72:19)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:119:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at traverse (/app/frontend/node_modules/@babel/traverse/lib/index.js:53:34)
    at lazyEvaluatePropSource (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:856:7)
    at lookupCrossFilePropSource (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:839:12)
    at tracePropToSource (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:780:12)
    at analyzeIdentifier (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:499:30)
    at analyzeExpression (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:389:14)
    at recordPropSources (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:811:26)
    at PluginPass.JSXElement (/app/frontend/plugins/visual-edits/babel-metadata-plugin.js:1764:9)
    at newFn (/app/frontend/node_modules/@babel/traverse/lib/visitors.js:168:14)
    at NodePath._call (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:50:20)
    at NodePath.call (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:40:18)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:87:31)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitSingle (/app/frontend/node_modules/@babel/traverse/lib/context.js:72:19)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:119:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitMultiple (/app/frontend/node_modules/@babel/traverse/lib/context.js:68:17)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:117:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitSingle (/app/frontend/node_modules/@babel/traverse/lib/context.js:72:19)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:119:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitSingle (/app/frontend/node_modules/@babel/traverse/lib/context.js:72:19)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:119:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)
    at TraversalContext.visitQueue (/app/frontend/node_modules/@babel/traverse/lib/context.js:96:16)
    at TraversalContext.visitMultiple (/app/frontend/node_modules/@babel/traverse/lib/context.js:68:17)
    at TraversalContext.visit (/app/frontend/node_modules/@babel/traverse/lib/context.js:117:19)
    at traverseNode (/app/frontend/node_modules/@babel/traverse/lib/traverse-node.js:130:17)
    at NodePath.visit (/app/frontend/node_modules/@babel/traverse/lib/path/context.js:93:52)

webpack compiled with 2 errors and 1 warning
yarn run v1.22.22
$ craco start
Attempting to bind to HOST environment variable: 0.0.0.0
If this was unintentional, check that you haven't mistakenly set it in your shell.
Learn more here: https://cra.link/advanced-config

Starting the development server...

Compiled successfully!

You can now view frontend in the browser.

  Local:            http://localhost:3000
  On Your Network:  http://10.208.162.151:3000

Note that the development build is not optimized.
To create a production build, use yarn build.

webpack compiled successfully
yarn run v1.22.22
$ craco start) for new JavaScript errors.
    -   **Why fix this issue and what will be achieved with the fix?** The application is completely unusable. Fixing this will make the UI accessible again.
    -   **Status:** IN PROGRESS
    -   **Is recurring issue?** N
    -   **Should Test frontend/backend/both after fix?** Frontend
-   **Issue 2: Verify and Fix Deployment Readiness**
    -   **Attempted fixes:** In a previous codebase, the agent fixed a  error by creating a static  in . This issue is likely to have returned with the new codebase.
    -   **Next debug checklist:**
        1.  Examine  to check how the  is being handled. If it's using , it is a critical deployment blocker.
        2.  If it's a blocker, generate a static secret key and add it to  as . Update the server code to use this environment variable.
        3.  Ensure  contains entries for  files.
        4.  Call the  to perform a full health check after fixing any identified issues.
    -   **Why fix this issue and what will be achieved with the fix?** To resolve critical security and stability vulnerabilities that prevent the application from being deployed successfully. A dynamic JWT secret causes all admin sessions to be invalidated on every server restart.
    -   **Status:** NOT STARTED
    -   **Is recurring issue?** Y
    -   **Should Test frontend/backend/both after fix?** Backend

**In progress Task List**:
-   None.

**Upcoming and Future Tasks**
- **Upcoming Tasks:**
  - **(P0) Re-implement Checkout & Invoicing Flow:** The detailed user requirements for the checkout process were implemented on a previous codebase and wiped out by the latest repo swap. This entire feature needs to be built again from scratch. This includes the WhatsApp redirect, payment screenshot upload changing order status, invoice generation, and automated emails.
  - **(P1) Re-implement Product Variation Editing:** The user wants to edit and reorder product variations from the admin panel. This was also implemented previously and needs to be re-added to .
  - **(P2) Enhance FAQ Page:** The user requested grouping FAQs by category and adding a search bar. This was implemented but wiped out. It needs to be re-implemented by adding a  field to the FAQ model and updating both the public and admin FAQ pages.
- **Future Tasks:**
  - Live purchase ticker
  - Bundle Deals section
  - Loyalty/Rewards Program
  - Referral System
  - Order Tracking Page
  - Sales Analytics Dashboard

**Completed work in this session**
-   **Multiple Codebase Migrations:** Successfully replaced the entire application codebase five times using user-provided GitHub repositories (, , , , and ), preserving and restoring user data with each swap.
-   **Checkout & Order Flow (Wiped Out):** Implemented a full checkout-to-invoice pipeline, including WhatsApp redirects, screenshot uploads that changed order status, and dynamic invoice generation.
-   **Feature Implementation (Wiped Out):** Added and later removed Bundle Deals and a Live Purchase Ticker. Enhanced the FAQ page with categories and search.
-   **Bug Fixes (On previous codebases):**
    -   Resolved critical  deployment errors by implementing a stable .
    -   Fixed a Failed to process order error by creating a public endpoint for payment screenshot uploads.
    -   Fixed an overly aggressive rate-limiter on the admin login page.
    -   Corrected a bug where the Trustpilot script failed to load and send review invitations.

**Earlier issues found/mentioned but not fixed**
-   Due to the frequent codebase replacements, all previously identified minor issues became irrelevant. The major pending work is the re-implementation of lost features.

**Known issue recurrence from previous fork**
-   **Dynamic JWT Secret:** A critical deployment blocker where the  is generated randomly on each server start has occurred before. It was fixed, but the new  codebase is highly likely to have this same vulnerability. This invalidates all admin tokens on every restart, leading to  errors in a production environment.

**Code Architecture**


**Key Technical Concepts**
- **Backend**: FastAPI, Python, Motor (async MongoDB driver)
- **Frontend**: React, Tailwind CSS, , 
- **Database**: MongoDB
- **Authentication**: Admin (JWT), Customer (Email OTP)

**key DB schema**
-   **Order**: , , , ,  (e.g., 'pending', 'confirmed', 'completed'), , .
-   **Product**: , , , .
-   **FAQ**: , , .
-   **Customer**: , , .

**changes in tech stack**
-   None. The stack has remained consistent (FastAPI/React/MongoDB) despite five full codebase replacements.

**All files of reference**
-   : Location of the critical bug that broke the UI.
-   : Core backend logic. Needs to be checked for the recurring  issue and modified to re-implement the checkout/invoicing flow.
-   : Needs to be checked for a static  and other required variables.
-   : Will need significant work to re-implement the user's detailed checkout flow.
-   : Will need to be created to display invoices.
-   : Needs to be updated to display payment screenshots and invoice links.

**Critical Info for New Agent**
-   **Your immediate task is to verify the fix for the black screen.** The application is currently unusable. Take a screenshot of the homepage.
-   **The user frequently replaces the entire codebase.** Be aware that any feature you build might be wiped out. The priority is to follow the user's most recent request.
-   **The checkout/invoicing flow is a major, detailed requirement.** It was implemented and then lost in the last code swap. You will need to re-implement this from the user's detailed instructions.
-   **Check for the recurring JWT Secret bug.** Before any deployment attempt, ensure a static  is defined in  and used in  to prevent  errors in production.

**documents and test reports created in this job**
-   
-   Data backups from the last migration are in the  directory (e.g., ).

**Last 10 User Messages and any pending HUMAN messages**
1.  **User:** Replace code with . (Status: Completed, but introduced a critical bug).
2.  **User:** (Implicitly reported via black screen) The app is broken. (Status: Fix applied, verification pending).
3.  **User (Previous codebase):** Asks to run deployer agent. (Status: Completed).
4.  **User (Previous codebase):** Fixes pricing () and product name in the WhatsApp message. (Status: Completed, but code wiped).
5.  **User (Previous codebase):** WhatsApp redirect doesn't work on mobile. (Status: Completed, but code wiped).
6.  **User (Previous codebase):** Provides detailed requirements for the full checkout, payment, and invoicing flow. (Status: Completed, but code wiped).
7.  **User (Previous codebase):** Reports failed to process order error. (Status: Completed, but code wiped).
8.  **User (Previous codebase):** Asks to replace code with . (Status: Completed).
9.  **User (Previous codebase):** Asks to call deployer agent again. (Status: Completed).
10. **User (Previous codebase):** Trustpilot send review is not working. (Status: Completed, but code wiped).

**Project Health Check:**
-   **Broken**: Yes. The application is currently non-functional, displaying a blank black screen due to a critical JavaScript error.

**3rd Party Integrations**
-   **Trustpilot**: Requires a Business Unit ID. Functionality was previously implemented but its status in the new codebase is unknown.
-   **Take.app**: Requires an API key. Functionality status in the new codebase is unknown.
-   **Gmail (SMTP)**: Configured in  to send emails for the customer OTP login system.

**Testing status**
-   **Testing agent used after significant changes**: NO
-   **Troubleshoot agent used after agent stuck in loop**: NO
-   **Test files created**: None.
-   **Known regressions**: The entire feature set is a regression due to the most recent codebase swap. Key lost features include the detailed checkout/invoice flow, product variation editing, and numerous bug fixes.

**Credentials to test flow:**
-   **Admin URL:** 
-   **Username:** 
-   **Password:** 

**What agent forgot to execute**
-   The agent has not yet taken a screenshot to verify that the fix for the critical black screen bug was successful. This is the most crucial next step.
-   The agent did not run the  on the newest  codebase to proactively identify recurring deployment blockers like the dynamic .</analysis>
